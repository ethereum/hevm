<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>hevm</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="overview.html">overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="symbolic.html"><strong aria-hidden="true">1.</strong> symbolic</a></li><li class="chapter-item expanded "><a href="equivalence.html"><strong aria-hidden="true">2.</strong> equivalence</a></li><li class="chapter-item expanded "><a href="exec.html"><strong aria-hidden="true">3.</strong> exec</a></li><li class="chapter-item expanded "><a href="dapp-test.html"><strong aria-hidden="true">4.</strong> dapp-test</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="controlling-the-unit-testing-environment.html"><strong aria-hidden="true">5.</strong> controlling the unit testing environment</a></li><li class="chapter-item expanded "><a href="using-the-visual-debugger.html"><strong aria-hidden="true">6.</strong> using the visual debugger</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> discovering reachable assertion violations</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> symbolic unit testing</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> equivalence checking</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">hevm</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p>The <code>hevm</code> project is an implementation of the Ethereum Virtual Machine (EVM) focused on symbolic
analysis of evm bytecode. It can:</p>
<ul>
<li>symbolically execute a smart contract and find reachable assertion violations</li>
<li>prove equivalence of two different bytecode objects</li>
<li>execute (symbolic and concrete) solidity tests written using <a href="https://github.com/dapphub/ds-test/"><code>ds-test</code></a> (a.k.a &quot;foundry tests&quot;)</li>
<li>visually debug arbitrary evm executions (both concrete &amp; symbolic)</li>
<li>fetch remote state via rpc</li>
<li>automatically create test cases</li>
</ul>
<p>It was originally developed as part of the <a href="https://github.com/dapphub/dapptools/">dapptools</a> project, and was forked to this repo by the formal methods team at the Ethereum Foundation in August 2022.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hevm-symbolic"><a class="header" href="#hevm-symbolic"><code>hevm symbolic</code></a></h1>
<pre><code class="language-sh">Usage: hevm symbolic [--code TEXT] [--calldata TEXT] [--address ADDR]
                     [--caller ADDR] [--origin ADDR] [--coinbase ADDR]
                     [--value W256] [--nonce W256] [--gas WORD64]
                     [--number W256] [--timestamp W256] [--basefee W256]
                     [--priority-fee W256] [--gaslimit WORD64] [--gasprice W256]
                     [--create] [--maxcodesize W256] [--prev-randao W256]
                     [--chainid W256] [--rpc TEXT] [--block W256]
                     [--state STRING] [--cache STRING] [--json-file STRING]
                     [--dapp-root STRING] [--initial-storage INITIALSTORAGE]
                     [--sig TEXT] [--arg STRING]... [--debug] [--get-models]
                     [--show-tree] [--show-reachable-tree]
                     [--smttimeout NATURAL] [--max-iterations INTEGER]
                     [--solver TEXT] [--smtdebug] [--assertions [WORD256]]
                     [--ask-smt-iterations INTEGER] [--num-solvers NATURAL]

Available options:
  -h,--help                Show this help text
  --code TEXT              Program bytecode
  --calldata TEXT          Tx: calldata
  --address ADDR           Tx: address
  --caller ADDR            Tx: caller
  --origin ADDR            Tx: origin
  --coinbase ADDR          Block: coinbase
  --value W256             Tx: Eth amount
  --nonce W256             Nonce of origin
  --gas WORD64             Tx: gas amount
  --number W256            Block: number
  --timestamp W256         Block: timestamp
  --basefee W256           Block: base fee
  --priority-fee W256      Tx: priority fee
  --gaslimit WORD64        Tx: gas limit
  --gasprice W256          Tx: gas price
  --create                 Tx: creation
  --maxcodesize W256       Block: max code size
  --prev-randao W256       Block: prevRandao
  --chainid W256           Env: chainId
  --rpc TEXT               Fetch state from a remote node
  --block W256             Block state is be fetched from
  --state STRING           Path to state repository
  --cache STRING           Path to rpc cache repository
  --json-file STRING       Filename or path to dapp build output (default:
                           out/*.solc.json)
  --dapp-root STRING       Path to dapp project root directory (default: . )
  --initial-storage INITIALSTORAGE
                           Starting state for storage: Empty, Abstract, Concrete &lt;STORE&gt; (default Abstract)
  --sig TEXT               Signature of types to decode / encode
  --arg STRING             Values to encode
  --debug                  Run interactively
  --get-models             Print example testcase for each execution path
  --show-tree              Print branches explored in tree view
  --show-reachable-tree    Print only reachable branches explored in tree view
  --smttimeout NATURAL     Timeout given to SMT solver in seconds (default: 300)
  --max-iterations INTEGER Number of times we may revisit a particular branching point
  --solver TEXT            Used SMT solver: z3 (default) or cvc5
  --smtdebug               Print smt queries sent to the solver
  --assertions [WORD256]   Comma seperated list of solc panic codes to check for (default: user defined assertions)
  --ask-smt-iterations INTEGER
                           Number of times we may revisit a particular branching
                           point before we consult the smt solver to check
                           reachability (default: 5)
  --num-solvers NATURAL    Number of solver instances to use (default: number of cpu cores)
</code></pre>
<p>Run a symbolic execution against the given parameters, searching for assertion violations.</p>
<p>Counterexamples will be returned for any reachable assertion violations. Where an assertion
violation is defined as either an execution of the invalid opcode (<code>0xfe</code>), or a revert with a
message of the form <code>abi.encodeWithSelector('Panic(uint256)', errCode)</code> with <code>errCode</code> being one of
the predefined solc assertion codes defined
<a href="https://docs.soliditylang.org/en/latest/control-structures.html#panic-via-assert-and-error-via-require">here</a>.</p>
<p>By default hevm ignores assertion violations that result from arithmetic overflow (<code>Panic(0x11)</code>),
although this behaviour can be customised via the <code>--assertions</code> flag. For example, the following
will return counterexamples for arithmetic overflow (<code>0x11</code>) and user defined assertions (<code>0x01</code>):</p>
<pre><code>hevm symbolic --code $CODE --assertions '[0x01, 0x11]'
</code></pre>
<p><code>--debug</code> enters an interactive debugger where the user can navigate the full execution space.</p>
<p>The default value for <code>calldata</code> and <code>caller</code> are symbolic values, but can be specialized to concrete functions with their corresponding flags.</p>
<p>One can also specialize specific arguments to a function signature, while leaving others abstract.
If <code>--sig</code> is given, calldata is assumed to be of the form suggested by the function signature. With this flag, specific arguments can be instantiated to concrete values via the <code>--arg</code> flag.</p>
<p>This is best illustrated through a few examples:</p>
<p>Calldata specialized to the bytestring <code>0xa9059cbb</code> followed by 64 symbolic bytes:</p>
<pre><code class="language-sh">hevm symbolic --sig &quot;transfer(address,uint256)&quot; --code $(&lt;dstoken.bin-runtime)
</code></pre>
<p>Calldata specialized to the bytestring <code>0xa9059cbb0000000000000000000000007cfa93148b0b13d88c1dce8880bd4e175fb0dedf</code> followed by 32 symbolic bytes.</p>
<pre><code class="language-sh">hevm symbolic --sig &quot;transfer(address,uint256)&quot; --arg 0x7cFA93148B0B13d88c1DcE8880bd4e175fb0DeDF --code $(&lt;dstoken.bin-runtime)
</code></pre>
<p>Calldata specialized to the bytestring <code>0xa9059cbb</code> followed by 32 symbolic bytes, followed by the bytestring <code>0000000000000000000000000000000000000000000000000000000000000000</code>:</p>
<pre><code class="language-sh">hevm symbolic --sig &quot;transfer(address,uint256)&quot; --arg &quot;&lt;symbolic&gt;&quot; --arg 0 --code $(&lt;dstoken.bin-runtime)
</code></pre>
<p>If the <code>--get-models</code> flag is given, example input values will be returned for each possible execution path.
This can be useful for automatic test case generation.</p>
<p>The default timeout for SMT queries is no timeout. If your program is taking longer than a couple of minutes to run,
you can experiment with configuring the timeout to somewhere around 10s by doing <code>--smttimeout 10000</code></p>
<p>Storage can be initialized in three ways:</p>
<ul>
<li><code>Empty</code>: all storage slots for all contracts are initialized to zero</li>
<li><code>Abstract</code>: all storage slots are initialized as unconstrained abstract values</li>
<li><code>Concrete &lt;STORE&gt;</code>: all storage slots except those mentioned in the <STORE> spec are initialized to zero</li>
</ul>
<p>When specifying a starting concrete store, the initial state can be passed to cli as a list of tuples. For example:</p>
<pre><code>hevm symbolic --code &lt;CODE&gt; --initial-storage &quot;Concrete [(0x0, [(0x1, 0x100)])]&quot;
</code></pre>
<p>Would execute with a starting storage state, where address 0x0 has storage slot 0x1 set to 0x100.</p>
<p><code>hevm</code> uses an eager approach for symbolic execution, meaning that it will first attempt to explore
all branches in the program (without querying the smt solver to check if they are reachable or not).
Once the full execution tree has been explored, the postcondition is checked against all leaves, and
the solver is invoked to check reachability for branches where a postcondition violation could
occur. While our tests have shown this approach to be significantly faster, when applied without
limits it would always result in infinite exploration of code involving loops, so after some
predefined number of iterations (controlled by the <code>--ask-smt-iterations</code> flag), the solver will be
invoked to check whether a given loop branch is reachable. In cases where the number of loop
iterations is known in advance, you may be able to speed up execution by setting this flag to an
appropriate value.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hevm-equivalence"><a class="header" href="#hevm-equivalence"><code>hevm equivalence</code></a></h1>
<pre><code class="language-sh">Usage: hevm equivalence --code-a TEXT --code-b TEXT [--sig TEXT]
                        [--arg STRING]... [--calldata TEXT]
                        [--smttimeout NATURAL] [--max-iterations INTEGER]
                        [--solver TEXT] [--smtoutput] [--smtdebug]
                        [--ask-smt-iterations INTEGER]

Available options:
  -h,--help                Show this help text
  --code-a TEXT            Bytecode of the first program
  --code-b TEXT            Bytecode of the second program
  --sig TEXT               Signature of types to decode / encode
  --arg STRING             Values to encode
  --calldata TEXT          Tx: calldata
  --smttimeout NATURAL     Timeout given to SMT solver in seconds (default: 300)
  --max-iterations INTEGER Number of times we may revisit a particular branching
                           point
  --solver TEXT            Used SMT solver: z3 (default) or cvc5
  --smtoutput              Print verbose smt output
  --smtdebug               Print smt queries sent to the solver
  --ask-smt-iterations INTEGER
                           Number of times we may revisit a particular branching
                           point before we consult the smt solver to check
                           reachability (default: 5)
</code></pre>
<p>Symbolically execute both the code given in <code>--code-a</code> and <code>--code-b</code> and try to prove equivalence between their outputs and storages.</p>
<p>If <code>--sig</code> is given, calldata is assumed to take the form of the function given.
If left out, calldata is a fully abstract buffer of at most 256 bytes.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hevm-exec"><a class="header" href="#hevm-exec"><code>hevm exec</code></a></h1>
<p>Run an EVM computation using specified parameters, using an interactive debugger when <code>--debug</code> flag is given.</p>
<pre><code class="language-sh">Usage: hevm exec [--code TEXT] [--calldata TEXT] [--address ADDR]
                 [--caller ADDR] [--origin ADDR] [--coinbase ADDR]
                 [--value W256] [--nonce W256] [--gas W256]
                 [--number W256] [--timestamp W256] [--gaslimit W256]
                 [--gasprice W256] [--create] [--maxcodesize W256]
                 [--prevrandao W256] [--debug] [--state STRING] [--rpc TEXT]
                 [--block W256] [--json-file STRING]
</code></pre>
<p>Minimum required flags:</p>
<p><code>--code</code> or (<code>--rpc</code> and <code>--address</code>).</p>
<p>If the execution returns an output, it will be written to stdout.</p>
<p>Exit code indicates whether the execution was successful or errored/reverted.</p>
<p>Simple example usage:</p>
<pre><code class="language-sh">hevm exec --code 0x647175696e6550383480393834f3 --gas 0xff
</code></pre>
<p>Debug a mainnet transaction (older transactions require archive node):</p>
<pre><code class="language-sh">export ETH_RPC_URL=https://mainnet.infura.io/v3/YOUR_API_KEY_HERE
export TXHASH=0xd2235b9554e51e8ff5b3de62039d5ab6e591164b593d892e42b2ffe0e3e4e426
hevm exec --caller $(seth tx $TXHASH from) --address $(seth tx $TXHASH to) --calldata $(seth tx $TXHASH input) --rpc $ETH_RPC_URL --block $(($(seth tx $TXHASH blockNumber)-1)) --gas $(seth tx $TXHASH gas) --debug
</code></pre>
<p>If <code>--state</code> is provided, hevm will load and save state to the directory provided. Git is used as a storage model, with each hevm run creating a new commit. The directory provided must be a non empty git repository. After a run you can see the state diff by simply looking at the commit (for example <code>git show HEAD</code>).</p>
<pre><code class="language-sh">mkdir mystate
cd mystate &amp;&amp; git init &amp;&amp; git commit --allow-empty -m &quot;init&quot; &amp;&amp; cd ..
hevm exec --code 0x600160015500 --state mystate --gas 0xffffff
cd mystate &amp;&amp; git show HEAD
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hevm-dapp-test"><a class="header" href="#hevm-dapp-test"><code>hevm dapp-test</code></a></h1>
<pre><code>Usage: hevm dapp-test [--json-file STRING] [--dapp-root STRING] [--debug]
                      [--jsontrace] [--fuzz-runs INT] [--depth INT]
                      [--replay (TEXT,BYTESTRING)] [--rpc TEXT] [--verbose INT]
                      [--coverage] [--state STRING] [--cache STRING]
                      [--match STRING] [--cov-match STRING] [--solver TEXT]
                      [--smtdebug] [--ffi] [--smttimeout INTEGER]
                      [--max-iterations INTEGER] [--ask-smt-iterations INTEGER]

Available options:
  -h,--help                Show this help text
  --json-file STRING       Filename or path to dapp build output (default:
                           out/*.solc.json)
  --dapp-root STRING       Path to dapp project root directory (default: . )
  --debug                  Run interactively
  --jsontrace              Print json trace output at every step
  --fuzz-runs INT          Number of times to run fuzz tests
  --depth INT              Number of transactions to explore
  --replay (TEXT,BYTESTRING)
                           Custom fuzz case to run/debug
  --rpc TEXT               Fetch state from a remote node
  --verbose INT            Append call trace: {1} failures {2} all
  --coverage               Coverage analysis
  --state STRING           Path to state repository
  --cache STRING           Path to rpc cache repository
  --match STRING           Test case filter - only run methods matching regex
  --cov-match STRING       Coverage filter - only print coverage for files
                           matching regex
  --solver TEXT            Used SMT solver: z3 (default) or cvc4
  --smtdebug               Print smt queries sent to the solver
  --ffi                    Allow the usage of the hevm.ffi() cheatcode (WARNING:
                           this allows test authors to execute arbitrary code on
                           your machine)
  --smttimeout NATURAL     Timeout given to SMT solver in seconds (default: 300)
  --max-iterations INTEGER Number of times we may revisit a particular branching
                           point
  --ask-smt-iterations INTEGER
                           Number of times we may revisit a particular branching
                           point before we consult the smt solver to check
                           reachability (default: 5)
</code></pre>
<p>Run any ds-test testing functions. Run under the hood whenever <code>dapp test</code> or <code>dapp debug</code> is called. Testing functions prefixed with <code>test</code> will be executed concretely. If concrete test functions have been given arguments, they will be randomly instantiated and run <code>--fuzz-runs</code> number of times. If testing functions are prefixed with <code>prove</code> they will be symbolically executed. In <code>--debug</code> mode, property based tests will not be available unless given specific arguments using <code>--replay</code>.</p>
<p>The <code>smttimeout</code>, <code>max-iterations</code> and <code>solver</code> options have the same semantics as in <code>hevm symbolic</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controlling-the-unit-testing-environment"><a class="header" href="#controlling-the-unit-testing-environment">controlling the unit testing environment</a></h1>
<h2 id="cheat-codes"><a class="header" href="#cheat-codes">Cheat codes</a></h2>
<p>Since Hevm is an EVM implementation mainly dedicated to testing and exploration, it features a set of <code>cheat codes</code> which can manipulate the environment in which the execution is run.</p>
<p>These can be accessed by calling into a contract (typically called <code>Hevm</code>) at address <code>0x7109709ECfa91a80626fF3989D68f67F5b1DD12D</code>, which implements the following methods:</p>
<ul>
<li>
<p><code>function warp(uint x) public</code>
Sets the block timestamp to <code>x</code>.</p>
</li>
<li>
<p><code>function roll(uint x) public</code>
Sets the block number to <code>x</code>.</p>
</li>
<li>
<p><code>function store(address c, bytes32 loc, bytes32 val) public</code>
Sets the slot <code>loc</code> of contract <code>c</code> to <code>val</code>.</p>
</li>
<li>
<p><code>function load(address c, bytes32 loc) public returns (bytes32 val)</code>
Reads the slot <code>loc</code> of contract <code>c</code>.</p>
</li>
<li>
<p><code>function sign(uint sk, bytes32 digest) public returns (uint8 v, bytes32 r, bytes32 s)</code>
Signs the <code>digest</code> using the private key <code>sk</code>. Note that signatures produced via <code>hevm.sign</code> will leak the private key.</p>
</li>
<li>
<p><code>function addr(uint sk) public returns (address addr)</code>
Derives an ethereum address from the private key <code>sk</code>. Note that <code>hevm.addr(0)</code> will fail with
<code>BadCheatCode</code> as <code>0</code> is an invalid ECDSA private key.</p>
</li>
<li>
<p><code>function ffi(string[] calldata) external returns (bytes memory)</code>
Executes the arguments as a command in the system shell and returns stdout. Expects abi encoded values to be returned from the shell or an error will be thrown. Note that this
cheatcode means test authors can execute arbitrary code on user machines as part of a call to <code>dapp test</code>, for this reason all calls to <code>ffi</code> will fail unless the <code>--ffi</code> flag is passed.</p>
</li>
<li>
<p><code>function prank(address sender) public</code>
Sets <code>msg.sender</code> to the specified <code>sender</code> for the next call.</p>
</li>
</ul>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<p>These environment variables can be used to control block parameters:</p>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Default</th><th>Synopsis</th></tr></thead><tbody>
<tr><td><code>DAPP_TEST_ADDRESS</code></td><td><code>0xb4c79daB8f259C7Aee6E5b2Aa729821864227e84</code></td><td>The address to deploy the test contract to</td></tr>
<tr><td><code>DAPP_TEST_CALLER</code></td><td><code>0x00a329c0648769a73afac7f9381e08fb43dbea72</code></td><td>The address to set <code>msg.sender</code> to when calling into the test contract</td></tr>
<tr><td><code>DAPP_TEST_ORIGIN</code></td><td><code>0x00a329c0648769a73afac7f9381e08fb43dbea72</code></td><td>The address to set <code>tx.orgin</code> to when calling into the test contract</td></tr>
<tr><td><code>DAPP_TEST_GAS_CREATE</code></td><td><code>0xffffffffffff</code></td><td>The gas to provide when creating the testing contract</td></tr>
<tr><td><code>DAPP_TEST_GAS_CALL</code></td><td><code>0xffffffffffff</code></td><td>The gas to provide to each call made to the testing contract</td></tr>
<tr><td><code>DAPP_TEST_BALANCE</code></td><td><code>0xffffffffffffffffffffffff</code></td><td>The balance to provide to <code>DAPP_TEST_ADDRESS</code></td></tr>
<tr><td><code>DAPP_TEST_COINBASE</code></td><td><code>0x0000000000000000000000000000000000000000</code></td><td>The coinbase address. Will be set to the coinbase for the block at <code>DAPP_TEST_NUMBER</code> if rpc is enabled</td></tr>
<tr><td><code>DAPP_TEST_NUMBER</code></td><td><code>0</code></td><td>The block number. Will be set to the latest block if rpc is enabled</td></tr>
<tr><td><code>DAPP_TEST_TIMESTAMP</code></td><td><code>0</code></td><td>The block timestamp. Will be set to the timestamp for the block at <code>DAPP_TEST_NUMBER</code> if rpc is enabled</td></tr>
<tr><td><code>DAPP_TEST_GAS_LIMIT</code></td><td><code>0</code></td><td>The block gas limit to use</td></tr>
<tr><td><code>DAPP_TEST_GAS_PRICE</code></td><td><code>0</code></td><td>The gas price to use</td></tr>
<tr><td><code>DAPP_TEST_PREVRANDAO</code></td><td><code>0</code></td><td>The value for PREVRANDAO. Will be set to the value for the block at <code>DAPP_TEST_NUMBER</code> if rpc is enabled</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="using-the-visual-debugger"><a class="header" href="#using-the-visual-debugger">Using the visual debugger</a></h1>
<h2 id="key-bindings"><a class="header" href="#key-bindings">Key bindings</a></h2>
<ul>
<li><code>Esc</code>: exit debugger</li>
<li><code>a</code>: step to start</li>
<li><code>e</code>: step to end</li>
<li><code>n</code>: step forwards by one instruction</li>
<li><code>p</code>: step backwards by one instruction</li>
<li><code>0</code>: choose the branch which does not jump</li>
<li><code>1</code>: choose the branch which does jump</li>
<li><code>N</code>: step to the next source position</li>
<li><code>P</code>: step previous source position</li>
<li><code>C-n</code>: step to the next source position and don't enter <code>CALL</code> or <code>CREATE</code></li>
<li><code>C-p</code>: step previous source position without entering</li>
<li><code>m</code>: toggle memory view</li>
<li><code>Down</code> : step to next entry in the callstack / Scroll memory pane\n&quot; &lt;&gt;</li>
<li><code>Up</code> : step to previous entry in the callstack / Scroll memory pane\n&quot; &lt;&gt;</li>
<li><code>h</code>: show key-binding help</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
